# 0. B-Spline Computation

**ะัะตะฝะบะฐ:** โญโญโญโญโญ (5/5)

---

## `compute_knots`

| ะัะฟะตะบั | ะะฐะดัะผะฐะฝะพ | ะะตะฐะปัะฝะพ |
|--------|----------|--------|
| ะะฐะทะฝะฐัะตะฝะธะต | ะััะธัะปะตะฝะธะต ัะทะปะพะฒะพะณะพ ะฒะตะบัะพัะฐ | ๐ข ะะฐะฑะพัะฐะตั |
| Uniform grid | ะะฐะฒะฝะพะผะตัะฝะฐั ัะตัะบะฐ | ๐ข |
| Extended knots | k ะดะพะฟะพะปะฝะธัะตะปัะฝัั ัะทะปะพะฒ ั ะบะฐะถะดะพะน ััะพัะพะฝั | ๐ข |
| Formula | `knots[i] = t_min + (i - order) * h` | ๐ข |

**ะขะตััั:**
| ะขะตัั | ะคะฐะนะป | ะงัะพ ะฟัะพะฒะตััะตั | ะัะตะฝะบะฐ |
|------|------|---------------|--------|
| `test_compute_knots` | `src/spline.rs` | ะะพะปะธัะตััะฒะพ knots = G+2k+1, endpoints ะฒ ะดะธะฐะฟะฐะทะพะฝะต | ๐ข ะะฐะทะพะฒัะน |
| `test_knot_generation` | `tests/spline_parity.rs` | ะคะพัะผัะปะฐ knots[i] ัะพะฒะฟะฐะดะฐะตั ั ะพะถะธะดะฐะตะผะพะน | ๐ข ะะพะปะฝัะน |
| Scipy comparison | `tests/spline_parity.rs` | Knots == scipy.interpolate reference | ๐ข ะญัะฐะปะพะฝะฝัะน |

---

## `find_span`

| ะัะฟะตะบั | ะะฐะดัะผะฐะฝะพ | ะะตะฐะปัะฝะพ |
|--------|----------|--------|
| ะะฐะทะฝะฐัะตะฝะธะต | ะะฐะนัะธ ะธะฝัะตัะฒะฐะป ะดะปั x | ๐ข O(1) ะดะปั uniform grid |
| Edge cases | ะะฑัะฐะฑะพัะบะฐ ะณัะฐะฝะธั | ๐ข Clamping ะบ ะฒะฐะปะธะดะฝะพะผั ะดะธะฐะฟะฐะทะพะฝั |
| Numerical stability | Float edge cases | ๐ข EPSILON padding |

**ะขะตััั:**
| ะขะตัั | ะคะฐะนะป | ะงัะพ ะฟัะพะฒะตััะตั | ะัะตะฝะบะฐ |
|------|------|---------------|--------|
| `test_find_span` | `src/spline.rs` | Span ะฒ ะฒะฐะปะธะดะฝะพะผ ะดะธะฐะฟะฐะทะพะฝะต | ๐ข ะะฐะทะพะฒัะน |
| `test_find_span_boundaries` | `tests/spline_parity.rs` | ะัะฐะฝะธัะฝัะต ััะปะพะฒะธั | ๐ข ะะพะปะฝัะน |
| `debug_span_at_grid_point` | `tests/debug_span.rs` | x ัะพัะฝะพ ะฝะฐ ัะทะปะต ัะตัะบะธ | ๐ข Edge case |

---

## `compute_basis`

| ะัะฟะตะบั | ะะฐะดัะผะฐะฝะพ | ะะตะฐะปัะฝะพ |
|--------|----------|--------|
| ะะฐะทะฝะฐัะตะฝะธะต | B-spline basis values | ๐ข De Boor recursion |
| Partition of unity | ฮฃ B_i(x) = 1 | ๐ข ะัะพะฒะตัะตะฝะพ ัะตััะฐะผะธ |
| Non-negativity | B_i(x) โฅ 0 | ๐ข |

**ะขะตััั:**
| ะขะตัั | ะคะฐะนะป | ะงัะพ ะฟัะพะฒะตััะตั | ะัะตะฝะบะฐ |
|------|------|---------------|--------|
| `test_basis_partition_of_unity` | `src/spline.rs` | ฮฃbasis = 1 | ๐ข ะะฐะทะพะฒัะน |
| `test_partition_of_unity` | `tests/spline_parity.rs` | 100 ัะพัะตะบ, 4 ะบะพะฝัะธะณััะฐัะธะธ | ๐ข ะะพะปะฝัะน |
| `test_basis_non_negative` | `tests/spline_parity.rs` | B_i(x) โฅ 0 | ๐ข ะะพะปะฝัะน |
| `test_spline_parity_with_scipy` | `tests/spline_parity.rs` | Basis == scipy reference | ๐ข ะญัะฐะปะพะฝะฝัะน |

---

## `compute_basis_and_deriv`

| ะัะฟะตะบั | ะะฐะดัะผะฐะฝะพ | ะะตะฐะปัะฝะพ |
|--------|----------|--------|
| ะะฐะทะฝะฐัะตะฝะธะต | Basis + ะฟัะพะธะทะฒะพะดะฝัะต | ๐ข ะะฐะฑะพัะฐะตั |
| Derivative formula | dB/dx via knot differences | ๐ข |
| Grid boundary | ะัะพะธะทะฒะพะดะฝัะต ะฝะฐ ะณัะฐะฝะธัะฐั | ๐ข ะะฑัะฐะฑะพัะฐะฝั |

**ะขะตััั:**
| ะขะตัั | ะคะฐะนะป | ะงัะพ ะฟัะพะฒะตััะตั | ะัะตะฝะบะฐ |
|------|------|---------------|--------|
| `test_derivative_accuracy_order2` | `tests/spline_derivative_debug.rs` | Ana vs Num, order=2 | ๐ข ะะพะปะฝัะน |
| `test_derivative_accuracy_order3` | `tests/spline_derivative_debug.rs` | Ana vs Num, order=3 | ๐ข ะะตะณัะตััะธะพะฝะฝัะน |
| `test_derivative_sum_to_zero` | `tests/spline_derivative_debug.rs` | ฮฃderiv = 0 | ๐ข ะะฐัะตะผะฐัะธัะตัะบะธะน |
| `test_derivative_continuity` | `tests/spline_derivative_debug.rs` | ะะตะฟัะตััะฒะฝะพััั ะฟัะธ ะฟะตัะตัะตัะตะฝะธะธ ัะทะปะพะฒ | ๐ข Edge case |

---

## ะะฑัะธะต ัะตััั

**ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั:**
| ะขะตัั | ะคะฐะนะป | ะะฟะธัะฐะฝะธะต |
|------|------|----------|
| `test_spline_parity_with_scipy` | `tests/spline_parity.rs` | ะะพะปะฝัะน parity ั scipy.interpolate.BSpline |

**ะะพะบัััะธะต ะบะพะฝัะธะณััะฐัะธะน:**
- Grid sizes: 2, 3, 4, 5, 6, 8, 32, 64
- Orders: 2, 3, 4, 5, 6
- Ranges: (-1,1), (-2,2), (0,1), (-1000,1000)

---

## ะัะฒะพะดั

| ะัะฟะตะบั | ะกัะฐััั |
|--------|--------|
| Unit tests | ๐ข ะฅะพัะพัะตะต ะฟะพะบัััะธะต |
| Integration tests | ๐ข Scipy reference |
| Edge cases | ๐ข Boundaries, float precision, extreme x |
| Derivative accuracy | ๐ข Numerical vs analytical |

**ะัะตะฝะบะฐ ัะตััะฝะพััะธ ัะตััะพะฒ:** โญโญโญโญโญ (5/5)
- โ ะญัะฐะปะพะฝะฝะพะต ััะฐะฒะฝะตะฝะธะต ั scipy โ ะทะพะปะพัะพะน ััะฐะฝะดะฐัั
- โ ะะฐัะตะผะฐัะธัะตัะบะธะต ะธะฝะฒะฐัะธะฐะฝัั (partition of unity, ฮฃderiv=0)
- โ ะงะธัะปะตะฝะฝะฐั vs ะฐะฝะฐะปะธัะธัะตัะบะฐั ะฟัะพะธะทะฒะพะดะฝะฐั
- โ Edge cases ะฝะฐ ะณัะฐะฝะธัะฐั ัะตัะบะธ

---

## ะะตััะฒัะต ะทะพะฝั

| ะะฑะปะฐััั | ะะธัะบ | ะัะธัะธะฝะฐ |
|---------|------|----------|
| ~~ะญะบัััะตะผะฐะปัะฝัะต x (1e-30, 1e30)~~ | ~~๐ก~~ | โ ะะพะบัััะพ `test_extreme_x_*` |
| ~~Denormalized floats~~ | ~~๐ก~~ | โ ะะพะบัััะพ `test_denormalized_floats` |
| ~~grid_size=2 ะผะธะฝะธะผะฐะปัะฝัะน~~ | ~~๐ก~~ | โ ะะพะบัััะพ `test_grid_size_2_minimum` |
| ~~ะัะตะฝั ะฒััะพะบะธะน order (5,6)~~ | ~~๐ก~~ | โ ะะพะบัััะพ `test_spline_order_5/6` |
| ~~grid_size > 16~~ | ~~๐ด~~ | โ MAX_GRID_SIZE=64, ัะตััั ะดะปั 32/64 |
